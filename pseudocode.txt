FUNCTION generateWorld
    OBJECT Random new rand
    FOR each y coordinate in wordHeight
        FOR each x coordinate in worldWidth
            SET randValue to new random value between 0-100
            IF randValue is smaller than 20 THEN
                SET world xy coordinate to WOOD
            ELSE IF randValue is smaller than 35 THEN
                SET world xy coordinate to LEAVES
            ELSE IF randValue is smaller than 50 THEN
                SET world xy coordinate to STONE
            ELSE IF randValue is smaller than 70 THEN
                SET world xy coordinate to IRON_ORE
            ELSE
                SET world xy coordinate to AIR


FUNCTION generateEmptyWorld
    SET world to interger array (NEW_WORLD_WIDTH, NEW_WORLD_HEIGHT)
    SET redBlock to 1
    SET whiteBlock to 4
    SET blueBlock to 3
    SET stripeHeight to one third of the NEW_WORLD_HEIGHT 

    FOR each y coordinate in stripeHeight
        FOR each x coordinate in NEW_WORLD_WIDTH
            SET world xy coordinate to redBlock
    
    FOR each y coordinate between stripeHeight and 2 times stripeHeight
        FOR each x coordinate in NEW_WORLD_WIDTH
            SET world xy coordinate to whiteBlock
    
    FOR each y coordinate between 2 times stripeHeight and NEW_WORLD_HEIGHT
        FOR each x coordinate in NEW_WORLD_WIDTH
            SET world xy coordinate to blueBlock


FUNCTION movePlayer
    CASE uppercase direction
        "W" OR "UP":
            IF playerY is greater than 0 THEN
                DECREMENT playerY
        "S" OR "DOWN":
            IF playerY is smaller than wordHeight-1 THEN
                INCREMENT playerY
        "A" OR "LEFT":
            IF playerX is greater than 0 THEN
                DECREMENT playerX
        "D" OR "RIGHT":
            IF playerX is smaller than worldWidth-1 THEN
                INCREMENT playerX
        DEFAULT:
    ENDCASE


FUNCTION mineBlock
    SET blockType to world(playerX, playerY)
    IF blockType is not AIR THEN
        ADD inventory blockType
        SET world(playerX,playerY) to AIR
        PRINT "Mined" GET blockname "."
    ELSE
        PRINT "No block to mine here."

FUNCTION displayCraftingRecipes
    PRINT "Crafting Recipes:"
    PRINT "1. Craft Wooden Planks: 2 Wood"
    PRINT "2. Craft Stick: 1 Wood"
    PRINT "3. Craft Iron Ingot: 3 Iron Ore"

FUNCTION inventoryContains(integer item)
    RETURN wheter inventory contains(item)

FUNCTION inventoryContains(integer item, integer count)
    SET itemCount to 0
    FOR each i in inventory
        IF i equals to item THEN
            INCREMENT itemCount
            IF itemCount equals count THEN
                RETURN true
    RETURN false

FUNCTION removeItemsFromInventory
    SET removedCount to 0
    NEW iterator inventory.iterator
    WHILE iterator has next item
        SET i to next iterator item
        IF i equals to item
            REMOVE iterator item
            INCREMENT removedCount
            IF removedCount equals to count THEN
                BREAK

FUNCTION addCraftedItem
    IF craftedItems equals to null THEN
        NEW ArrayList craftedItems
    ADD craftedItem to craftedItems

FUNCTION saveGame(string fileName)
    TRY NEW ObjectOutputStream(NEW FileOutputStream(fileName)) outputStream
        WRITE NEW_WORLD_WIDTH to outputStream
        WRITE NEW_WORLD_HEIGHT to outputStream
        WRITE world to outputStream
        WRITE playerX to outputStream
        WRITE playerY to outputStream
        WRITE inventory to outputStream
        WRITE craftedItems to outputStream
        WRITE unlockMode to outputStream
        PRINT "Game state saved to file: " + fileName
    CATCH
        PRINT "Error while saving the game state: " + error message
    waitForEnter()

FUNCTION loadGame(string fileName)
    TRY NEW ObjectInputStream(NEW FileInputStream(fileName)) inputStream
        SET NEW_WORLD_WIDTH to READ inputStream
        SET NEW_WORLD_HEIGHT to READ inputStream
        SET world to READ inputStream
        SET playerX to READ inputStream
        SET playerY to READ inputStream
        SET inventory to READ inputStream
        SET craftedItems to READ inputStream
        SET unlockMode to REAF inputStream
        PRINT "Game state loaded from file: " + fileName
    CATCH
        PRINT "Error while loading the game state: " + error message
    waitForEnter()

FUNCTION displayLegend
    PRINT "Legend:" in blue
    PRINT "-- - Empty block" in white
    PRINT "▒▒ - Wood block" in red
    PRINT "§§ - Leaves block" in green
    PRINT "▓▓ - Stone block" in blue
    PRINT "°°- Iron ore block" in white
    PRINT "P - Player" in blue

FUNCTION displayInventory
    PRINT "Inventory:"
    IF inventory is empty THEN
        PRINT "Empty" in yellow
    ELSE
        SET blockCounts to NEW integer array[5]
        FOR each i in inventory
            SET block to GET inventory(i)
            INCREMENT blockCounts[block]
        FOR each blockType in blockCounts
            SET occurrences to blockCounts[blockType]
            IF occurrences bigger than 0 THEN
                PRINT getBlockName(blockType) + " - " + occurrences
    PRINT "Crafted Items:"
    IF craftedItems equals to null THEN
        PRINT "None" in yellow
    ELSE
        FOR each item in craftedItems
            PRINT getCraftedItemColor(item) + getCraftedItemName(item) + ", "
        PRINT NEW LINE
    PRINT NEW LINE